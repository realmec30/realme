<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temperature Data Viewer</title>
</head>
<body>
    <h1>Fetch Temperature Data</h1>
    <form id="fetch-form">
        <label for="start-date">Start Date:</label>
        <input type="datetime-local" id="start-date" name="start-date" required>
        <br>
        <label for="end-date">End Date:</label>
        <input type="datetime-local" id="end-date" name="end-date" required>
        <br><br>
        <button type="submit">Fetch Data</button>
    </form>
    <div id="results">
        <h2>Results:</h2>
        <ul id="data-list"></ul>
    </div>
    <script>
        document.getElementById('fetch-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const startDate = new Date(document.getElementById('start-date').value);
            const endDate = new Date(document.getElementById('end-date').value);

            if (startDate >= endDate) {
                alert('End date must be after the start date.');
                return;
            }

            try {
                const response = await fetch('https://fir-60afc-default-rtdb.asia-southeast1.firebasedatabase.app/temperatures.json');
                const data = await response.json();
                
                const filteredData = Object.entries(data)
                    .filter(([key, value]) => {
                        const timestamp = new Date(value.timestamp);
                        return timestamp >= startDate && timestamp <= endDate;
                    })
                    .map(([key, value]) => `${value.timestamp}: ${value.temperature}Â°C`);

                const dataList = document.getElementById('data-list');
                dataList.innerHTML = filteredData.length > 0 
                    ? filteredData.map(item => `<li>${item}</li>`).join('')
                    : '<li>No data available for the selected range.</li>';
            } catch (error) {
                console.error('Error fetching data:', error);
                alert('Failed to fetch data. Check console for details.');
            }
        });
    </script>
</body>
</html>

